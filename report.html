<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Report Page</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap');

* {
  font-family: "Montserrat", sans-serif;
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  min-height: 100vh;
  background: linear-gradient(135deg, #e9ecef, #f8f9fa);
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 30px 15px;
}

/* Main container */
.outer {
  width: 100%;
  max-width: 900px;
  background: #ffffff;
  border-radius: 16px;
  padding: 25px 30px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
}

/* Heading */
#heading {
  text-align: center;
  font-weight: 700;
  font-size: 26px;
  padding: 14px;
  margin-bottom: 25px;
  color: #222;
  background: #f1f3f5;
  border-radius: 12px;
}

/* Form section */
.loc_box {
  background: #fafafa;
  border: 1px solid #e1e1e1;
  border-radius: 14px;
  padding: 18px 20px;
  margin-bottom: 18px;
  transition: box-shadow 0.3s ease, transform 0.2s ease;
}

.loc_box:hover {
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
  transform: translateY(-2px);
}

.loc_box label {
  display: block;
  font-size: 14px;
  font-weight: 600;
  color: #444;
  margin-top: 12px;
  margin-bottom: 6px;
}

/* Inputs */
.loc_box input,
.loc_box select,
.loc_box textarea {
  width: 100%;
  padding: 10px 12px;
  border-radius: 10px;
  border: 1px solid #ccc;
  font-size: 14px;
  outline: none;
  background: #fff;
  transition: border 0.2s ease, box-shadow 0.2s ease;
}

.loc_box textarea {
  resize: none;
  min-height: 90px;
}

/* Focus effect */
.loc_box input:focus,
.loc_box select:focus,
.loc_box textarea:focus {
  border-color: #ff4d4d;
  box-shadow: 0 0 0 3px rgba(255, 77, 77, 0.15);
}

/* Submit section */
.sbm {
  text-align: center;
  margin-top: 25px;
}

/* Button */
.Recent {
  background: linear-gradient(135deg, #ff4d4d, #ff1f1f);
  border: none;
  color: #ffffff;
  padding: 12px 28px;
  border-radius: 30px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease, opacity 0.2s;
}

.Recent:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(255, 77, 77, 0.35);
  opacity: 0.95;
}

.Recent:active {
  transform: translateY(0);
  box-shadow: 0 4px 10px rgba(255, 77, 77, 0.25);
}

/* Responsive */
@media (max-width: 600px) {
  .outer {
    padding: 20px;
  }

  #heading {
    font-size: 22px;
  }
}
</style>
</head>
<body>
<div class="outer">
  <h2 id="heading">REPORT INCIDENT</h2>

  <form id="incidentForm" enctype="multipart/form-data">

    <!-- INCIDENT DETAILS -->
    <div class="loc_box">
      <label>Incident Type(*)</label>
      <select name="incident_type" required>
        <option value="" disabled selected>--</option>
        <option value="garbage">Found garbage</option>
        <option value="Path broken">Path is blocked/damaged</option>
        <option value="Misc">Something else</option>
      </select>

      <label>Please explain the issue(*)</label>
      <textarea name="description" rows="5" required></textarea>

      <label>Upload an image</label>
      <input type="file" name="image" accept="image/*">
    </div>

    <!-- LOCATION DETAILS -->
    <div class="loc_box">
      <label>State(*)</label>
      <select name="state" required>
        <option value="" disabled selected>--</option>
        <option value="AP">Andhra Pradesh</option>
        <option value="BR">Bihar</option>
        <option value="Ktk">Karnataka</option>
        <option value="Mhr">Maharashtra</option>
        <!-- add remaining states -->
      </select>

      <label>City(*)</label>
      <input type="text" name="city" required>

      <label>Area(*)</label>
      <input type="text" name="area" required>

      <label>Directions to reach(*)</label>
      <textarea name="location" rows="3" required></textarea>
    </div>

    <div class="sbm">
      <button type="submit" class="Recent">Submit</button>
    </div>

  </form>
</div>

<script>
document.getElementById("incidentForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const form = e.target;
  const formData = new FormData(form);

  try {
    const response = await fetch("http://localhost:5000/api/incidents", {
      method: "POST",
      body: formData
    });

    if(response.ok){
      alert("Incident reported successfully!");
      form.reset();
    } else {
      const err = await response.json();
      alert("Failed to report incident: " + (err.message || response.statusText));
    }
  } catch(err){
    console.error(err);
    alert("Error submitting form. Make sure the backend is running on port 5000.");
  }
});
</script>
</body>
</html>

